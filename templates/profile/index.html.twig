{% extends 'base.html.twig' %}

{% block title %}My Profile{% endblock %}

{% block content %}
<!-- Page Header Start -->
<div class="container-fluid page-header mb-5 p-0" style="background-image: url('{{ asset('img/carousel-bg-1.jpg') }}');">
    <div class="container-fluid page-header-inner py-5">
        <div class="container text-center">
            <h1 class="display-3 text-white mb-3 animated slideInDown">My Profile</h1>
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb justify-content-center text-uppercase">
                    <li class="breadcrumb-item">
                        <a href="{{ path('app_home') }}" class="{{ app.request.get('_route') == 'app_home' ? 'active' : '' }}">Home</a>
                    </li>
                    <li class="breadcrumb-item text-white active" aria-current="page">Profile</li>
                </ol>
            </nav>
        </div>
    </div>
</div>
<!-- Page Header End -->

<!-- Profile Form Start -->
<div class="container-xxl py-5">
    <div class="container">
        <div class="text-center wow fadeInUp" data-wow-delay="0.1s">
            <h6 class="text-primary text-uppercase">// Profile //</h6>
            <h1 class="mb-5">Manage Your Account</h1>
        </div>

        <div class="row justify-content-center">
            <div class="col-lg-8">
                {{ form_start(form, {'attr': {'class': 'wow fadeInUp', 'data-wow-delay': '0.2s', 'enctype': 'multipart/form-data'}}) }}
                <div class="row g-4">

                    <!-- Profile Image Upload -->
                    <div class="col-12 text-center">
                        {% if app.user.photo_profile %}
                            <img src="{{ asset('uploads/' ~ app.user.photo_profile) }}" alt="Profile Image"
                                 class="rounded-circle mb-3" style="width: 180px; height: 180px; object-fit: cover;">
                        {% else %}
                            <img src="{{ asset('img/default-profile.png') }}" alt="Default Profile"
                                 class="rounded-circle mb-3" style="width: 180px; height: 180px; object-fit: cover;">
                        {% endif %}
                        <div class="form-floating">
                            {{ form_widget(form.profile_image) }}
                            {{ form_label(form.profile_image, 'Upload New Profile Picture') }}
                            {{ form_errors(form.profile_image) }}
                        </div>
                    </div>

                    <!-- Nom -->
                    <div class="col-md-6">
                        <div class="form-floating">
                            {{ form_widget(form.nom, {'attr': {'class': 'form-control'}}) }}
                            {{ form_label(form.nom, 'Nom') }}
                            {{ form_errors(form.nom) }}
                        </div>
                    </div>

                    <!-- Prénom -->
                    <div class="col-md-6">
                        <div class="form-floating">
                            {{ form_widget(form.prenom, {'attr': {'class': 'form-control'}}) }}
                            {{ form_label(form.prenom, 'Prénom') }}
                            {{ form_errors(form.prenom) }}
                        </div>
                    </div>

                    <!-- Username -->
                    <div class="col-12">
                        <div class="form-floating mb-3">
                            {{ form_widget(form.username, {'attr': {'class': 'form-control'}}) }}
                            {{ form_label(form.username) }}
                        </div>
                        <div class="text-danger small mt-1">
                            {{ form_errors(form.username) }}
                        </div>
                    </div>

                    <!-- Adresse -->
                    <div class="col-12">
                        <div class="form-floating">
                            {{ form_widget(form.adresse, {'attr': {'class': 'form-control'}}) }}
                            {{ form_label(form.adresse, 'Adresse') }}
                            {{ form_errors(form.adresse) }}
                        </div>
                    </div>

                    <!-- Save Changes Button -->
                    <div class="col-12 text-center">
                        <button class="btn btn-primary py-2" type="submit">Save Changes</button>
                    </div>

                </div>
                {{ form_end(form) }}
            </div>
        </div>

       <!-- Logout Button with Icon --> 
<div class="row justify-content-center mt-3">
    <div class="col-lg-8">
        <form action="/logout" method="post">
            <button type="submit" class="btn btn-danger py-2 d-flex align-items-center">
                <span class="nav-icon me-2">
                    <i class="fas fa-sign-out-alt"></i>
                </span>
                Logout
            </button>
        </form>
    </div>
</div>

    </div>
</div>
<!-- Profile Form End -->
{% endblock %}
